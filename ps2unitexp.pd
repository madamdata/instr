#N canvas 10 269 608 456 10;
#X obj 200 294 *~;
#X obj 258 294 *~;
#N canvas 1 53 693 313 calculatefreq 0;
#X obj 17 104 expr pow(2 \, ($f1/12));
#X obj 17 64 inlet semitones;
#X obj 17 244 outlet frequency;
#X obj 186 15 inlet maxdelay;
#X obj 174 68 t b f;
#X obj 17 216 expr (1-$f1)/$f2;
#X obj 206 150 / 1000;
#X text 220 107 <- calculates the playback ratio \, which is 2 to the
power of (number of semitones /12);
#X text 142 218 <- phasor frequency is (1 - ratio) / max delay;
#X connect 0 0 5 0;
#X connect 1 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 4 1 6 0;
#X connect 5 0 2 0;
#X connect 6 0 5 1;
#X restore 329 105 pd calculatefreq;
#N canvas 6 173 767 377 phasors 0;
#X obj 123 55 phasor~;
#X obj 282 177 /~ 2;
#X obj 282 199 -~ 0.25;
#X obj 282 221 cos~;
#X obj 249 94 +~ 0.5;
#X obj 249 116 wrap~;
#X obj 413 168 /~ 2;
#X obj 413 190 -~ 0.25;
#X obj 413 212 cos~;
#X obj 123 28 inlet frequency;
#X text 305 94 generate overlapping phasor;
#X obj 35 250 outlet~ phase1;
#X obj 154 250 outlet~ phase2;
#X obj 284 251 outlet~ window1;
#X obj 413 254 outlet~ window2;
#X obj 527 26 inlet maxdelay;
#X text 486 191 generate cosine windows;
#X obj 527 48 smoother 25;
#X obj 155 191 *~;
#X obj 36 187 *~;
#X obj 33 222 lop~ 2000;
#X obj 167 223 lop~ 2000;
#X connect 0 0 1 0;
#X connect 0 0 4 0;
#X connect 0 0 19 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 13 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 18 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 14 0;
#X connect 9 0 0 0;
#X connect 15 0 17 0;
#X connect 17 0 18 1;
#X connect 17 0 19 1;
#X connect 18 0 21 0;
#X connect 19 0 20 0;
#X connect 20 0 11 0;
#X connect 21 0 12 0;
#X restore 329 130 pd phasors;
#X obj 168 47 inlet~;
#X obj 344 47 inlet semitones;
#X obj 484 51 inlet maxdelay;
#X obj 220 370 outlet~;
#X obj 511 105 inlet switch;
#X obj 511 127 switch~;
#X text 35 143 dummy connection to ensure correct order of execution
, f 13;
#X obj 216 333 *~ 0.7;
#N canvas 0 0 450 300 writer 0;
#X obj 149 42 inlet~;
#X obj 157 217 outlet~;
#X obj 149 64 delwrite~ \$0-delay 1800;
#X connect 0 0 2 0;
#X restore 167 121 pd writer;
#N canvas 1 53 450 300 reader 0;
#X obj 126 75 inlet~;
#X obj 280 79 inlet~ deltime;
#X obj 138 211 outlet~;
#X obj 166 160 delread4~ \$0-delay;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X restore 153 184 pd reader;
#N canvas 1 53 450 300 reader 0;
#X obj 126 75 inlet~;
#X obj 280 79 inlet~ deltime;
#X obj 138 211 outlet~;
#X obj 166 160 delread4~ \$0-delay;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X restore 240 182 pd reader;
#X connect 0 0 11 0;
#X connect 1 0 11 0;
#X connect 2 0 3 0;
#X connect 3 0 13 1;
#X connect 3 1 14 1;
#X connect 3 2 0 1;
#X connect 3 3 1 1;
#X connect 4 0 12 0;
#X connect 5 0 2 0;
#X connect 6 0 2 1;
#X connect 6 0 3 1;
#X connect 8 0 9 0;
#X connect 11 0 7 0;
#X connect 12 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 0 0;
#X connect 14 0 1 0;
